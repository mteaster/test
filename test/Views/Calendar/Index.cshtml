@model IEnumerable<test.Models.CalendarEvent>

@{
    ViewBag.Title = "Calendar";
}


@section featured 
{
    @Html.Partial("_BandHeaderPartial")
}

<span>Events for @ViewBag.Month / @ViewBag.Year</span>

<table class="pretty" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <th>@Html.DisplayNameFor(model => model.EventId)</th>
        <th>@Html.DisplayNameFor(model => model.EventTitle)</th>
        <th>@Html.DisplayNameFor(model => model.EventTime)</th>
        <th>@Html.DisplayNameFor(model => model.EventDescription)</th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.EventId)</td>
            <td>@Html.DisplayFor(modelItem => item.EventTitle)</td>
            <td>@Html.DisplayFor(modelItem => item.EventTime)</td>
            <td>@Html.DisplayFor(modelItem => item.EventDescription)</td>
        </tr>
    }
</table>

@{ 
    int previousMonth;
    int previousMonthYear;
    int nextMonth;
    int nextMonthYear;
        
    if(ViewBag.Month == 1)
    {
        previousMonth = ViewBag.Month = 12;
        previousMonthYear = ViewBag.Year - 1;
    }
    else
    {
        previousMonth = ViewBag.Month - 1;
        previousMonthYear = ViewBag.Year;
    }

    if (ViewBag.Month == 12)
    {
        nextMonth = 1;
        nextMonthYear = ViewBag.Year + 1;
    }
    else
    {
        nextMonth = ViewBag.Month + 1;
        nextMonthYear = ViewBag.Year;
    }
    
    Html.ActionLink("Last month", "Month", "Calendar", 
                            new { bandId = ViewBag.BandId, month = previousMonth, year = previousMonthYear }, null);

    Html.ActionLink("Next month", "Month", "Calendar",
                            new { bandId = ViewBag.BandId, month = nextMonth, year = nextMonthYear }, null);
}


